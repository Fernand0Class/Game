# ğŸ¯ REFERENCIA RÃPIDA - Sistema de Animaciones de Salto\n\n## ğŸ“ UbicaciÃ³n de Cambios\n\n### 1. PreloadScene.js\n**LÃ­nea aprox: 20-40**\n```javascript\n// NUEVO: Tres spritesheets de salto\nthis.load.spritesheet('personaje1_jump_ground', 'Sprites/Sprite-tierra.png', {...});\nthis.load.spritesheet('personaje1_jump_air', 'Sprites/Sprite-aire.png', {...});\nthis.load.spritesheet('personaje1_jump_fall', 'Sprites/Sprite-caida.png', {...});\n```\n\n### 2. animations.js\n**LÃ­nea aprox: 44**\n```javascript\n// NUEVO: FunciÃ³n para crear animaciones de salto por estado\ncreateJumpStateAnimations(scene);\n```\n\n**LÃ­nea aprox: 95-160**\n```javascript\n// NUEVA FUNCIÃ“N: Detecta estado del salto y muestra sprite correspondiente\nexport function playJumpStateAnimation(player, scene, characterIndex) {\n    if (characterIndex === 0) {\n        const isJumping = !player.body.onFloor();\n        const isMovingUp = player.body.velocity.y < -50;\n        const isMovingDown = player.body.velocity.y > 50;\n        \n        if (isJumping) {\n            if (isMovingUp) {\n                if (scene.anims.exists('personaje1_jump_air')) {\n                    player.anims.play('personaje1_jump_air', true);\n                }\n            } else if (isMovingDown) {\n                if (scene.anims.exists('personaje1_jump_fall')) {\n                    player.anims.play('personaje1_jump_fall', true);\n                }\n            }\n        } else {\n            if (scene.anims.exists('personaje1_jump_ground')) {\n                player.anims.play('personaje1_jump_ground', true);\n            }\n        }\n    }\n}\n```\n\n### 3. characters.js\n**LÃ­nea aprox: 16-17**\n```javascript\n// CAMBIO: De jumpAnimationKey: 'personaje1_jump' a:\njumpAnimationKey: 'personaje1_jump_ground',\n\n// NUEVO: Agregar referencias a los 3 sprites\njumpGroundSpritesheet: 'personaje1_jump_ground',\njumpAirSpritesheet: 'personaje1_jump_air',\njumpFallSpritesheet: 'personaje1_jump_fall',\n```\n\n### 4. PlayScene.js\n**LÃ­nea aprox: 3**\n```javascript\n// CAMBIO: De playJumpAnimation a playJumpStateAnimation\nimport { playWalkAnimation, playIdleAnimation, playJumpStateAnimation, stopAnimation } from '../assets/animations.js';\n```\n\n**LÃ­nea aprox: 110**\n```javascript\n// NUEVO: Se ejecuta en cada frame para actualizar animaciÃ³n del salto\nplayJumpStateAnimation(this.player, this, this.player.characterIndex);\n```\n\n---\n\n## ğŸ”€ Flujo de EjecuciÃ³n\n\n```\n1. CARGA DEL JUEGO\n   â””â”€ PreloadScene.preload()\n       â””â”€ Cargar: Sprite-tierra.png, Sprite-aire.png, Sprite-caida.png\n   \n   â””â”€ PreloadScene.create()\n       â””â”€ createAnimations(scene)\n           â””â”€ createJumpStateAnimations(scene)\n               â””â”€ Crear 3 animaciones Phaser\n\n2. EN JUEGO (PlayScene)\n   â””â”€ Presiona ESPACIO\n       â””â”€ makePlayerJump() â†’ setVelocityY(-500)\n   \n   â””â”€ Cada frame (~60x/segundo)\n       â””â”€ update() â†’ playJumpStateAnimation()\n           â”œâ”€ Revisa: Â¿En el aire?\n           â”œâ”€ Revisa: Â¿Velocidad arriba/abajo?\n           â””â”€ Reproduce sprite correspondiente\n```\n\n---\n\n## ğŸ¬ Tabla de Transiciones\n\n| Estado Anterior | Velocidad Y | Estado Nuevo | Sprite Mostrado | PrÃ³ximo Estado |\n|-----------------|-------------|--------------|-----------------|----------------|\n| En piso | 0 | TIERRA | Sprite-tierra | â†’ Puede saltar |\n| Salto (inicio) | -450 | AIRE (subida) | Sprite-aire | â†’ Pico |\n| Pico salto | -10 | AIRE (pico) | Sprite-aire | â†’ Bajada |\n| Bajada (lenta) | +30 | AIRE (bajada) | Sprite-aire | â†’ CaÃ­da |\n| CaÃ­da (rÃ¡pida) | +200 | CAÃDA | Sprite-caida | â†’ Aterrizaje |\n| Aterrizaje | 0 | TIERRA | Sprite-tierra | â† Fin salto |\n\n---\n\n## ğŸ”§ ParÃ¡metros Ajustables\n\n### Thresholds de Velocidad (en animations.js)\n\n```javascript\n// LÃNEA: const isMovingUp = player.body.velocity.y < -50;\n// -50 = MÃ­nima velocidad para cambiar a Sprite-aire\n// Aumentar a -100 = Menos sensible (espera mÃ¡s para cambiar)\n// Disminuir a -10 = MÃ¡s sensible (cambia mÃ¡s rÃ¡pido)\n\nconst isMovingUp = player.body.velocity.y < -50;  // â† Editar aquÃ­\n\n// LÃNEA: const isMovingDown = player.body.velocity.y > 50;\n// 50 = MÃ­nima velocidad para cambiar a Sprite-caida\n// Aumentar a 100 = Menos sensible\n// Disminuir a 10 = MÃ¡s sensible\n\nconst isMovingDown = player.body.velocity.y > 50;  // â† Editar aquÃ­\n```\n\n### Velocidad de Fotogramas de AnimaciÃ³n (en PreloadScene.js)\n\n```javascript\n// En createJumpStateAnimations() o createAnimations()\nscene.anims.create({\n    key: 'personaje1_jump_air',\n    frames: scene.anims.generateFrameNumbers(...),\n    frameRate: 10,  // â† Fotogramas por segundo (mÃ¡s = mÃ¡s rÃ¡pido)\n    repeat: -1      // -1 = bucle infinito\n});\n```\n\n---\n\n## âœ¨ Variables Clave\n\n```javascript\n// Velocidad vertical (pixels/segundo)\nplayer.body.velocity.y\n    < 0  = Movimiento hacia arriba\n    = 0  = Sin movimiento vertical\n    > 0  = Movimiento hacia abajo\n\n// Verificar si estÃ¡ en piso\nplayer.body.onFloor()  // true o false\n\n// AnimaciÃ³n actual\nplayer.anims.currentAnim?.key  // 'personaje1_jump_air' etc\n\n// Reproducir animaciÃ³n\nplayer.anims.play('nombre_anim', true)  // true = ignorar si ya estÃ¡ corriendo\n```\n\n---\n\n## ğŸ“¦ Estructura de Spritesheets\n\nCada spritesheet DEBE ser:\n- **Formato:** PNG con fondo transparente (recomendado)\n- **TamaÃ±o de frame:** 64x64 pÃ­xeles\n- **DisposiciÃ³n:** Puede ser:\n  - Horizontal (mÃºltiples columnas, 1 fila)\n  - Vertical (1 columna, mÃºltiples filas)\n  - Grid (varias filas y columnas)\n\n**Ejemplo:**\n```\nSprite-aire.png\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Frame 0 â”‚ Frame 1 â”‚ Frame 2 â”‚ Frame 3 â”‚\nâ”‚ (64x64) â”‚ (64x64) â”‚ (64x64) â”‚ (64x64) â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n---\n\n## ğŸ§ª Test MÃ­nimo\n\n```javascript\n// Abre consola (F12) y ejecuta en PlayScene:\n\n// 1. Verificar carga\nconsole.log(\n    'Texturas cargadas:',\n    this.textures.exists('personaje1_jump_ground'),\n    this.textures.exists('personaje1_jump_air'),\n    this.textures.exists('personaje1_jump_fall')\n);\n\n// 2. Verificar animaciones\nconsole.log(\n    'Animaciones creadas:',\n    this.anims.exists('personaje1_jump_ground'),\n    this.anims.exists('personaje1_jump_air'),\n    this.anims.exists('personaje1_jump_fall')\n);\n\n// 3. Monitorear en cada salto\nif (Phaser.Input.Keyboard.JustDown(this.cursors.space)) {\n    console.log('SALTO DETECTADO - Vel Y:', this.player.body.velocity.y);\n}\n```\n\n---\n\n## ğŸ”— Relaciones de Dependencia\n\n```\nPlayScene\n    â†“ necesita\nplayJumpStateAnimation() [animations.js]\n    â†“ requiere\ngetCharacterAnimationConfig() [characters.js]\n    â†“ depende de\ncharactersData[0] con propiedades jump*\n\n\nPreloadScene\n    â†“ carga\nSprite-tierra.png\nSprite-aire.png\nSprite-caida.png\n    â†“ crea\ncreateAnimations()\n    â†“ que llama\ncreateJumpStateAnimations()\n    â†“ que genera\npersonaje1_jump_ground anim\npersonaje1_jump_air anim\npersonaje1_jump_fall anim\n```\n\n---\n\n## ğŸ® Controles para Prueba\n\n```\nESPACIO          = Saltar\nFLECHA IZQUIERDA = Caminar izquierda\nFLECHA DERECHA   = Caminar derecha\nF12              = Abrir consola para debug\n```\n\n---\n\n## âŒ Errores Comunes\n\n| Error | Causa | SoluciÃ³n |\n|-------|-------|----------|\n| `Cannot read property 'onFloor'` | player es null | Verificar que se crea en PlayScene.create() |\n| `getCharacterAnimationConfig is not defined` | No se importÃ³ | Agregar import en animations.js |\n| `personaje1_jump_air is not playing` | AnimaciÃ³n no existe | Verificar createJumpStateAnimations() se ejecutÃ³ |\n| El sprite no cambia | characterIndex â‰  0 | Verificar que seleccionÃ³ Personaje 1 |\n| Solo muestra tierra | Thresholds muy altos | Bajar de -50/50 a -20/20 |\n\n---\n\n## ğŸ“Š EstadÃ­sticas del Sistema\n\n```\nâœ“ LÃ­neas modificadas: ~50\nâœ“ LÃ­neas aÃ±adidas: ~120\nâœ“ Archivos afectados: 4\nâœ“ Nuevas funciones: 2\nâœ“ Nuevas animaciones: 3\nâœ“ Sprites nuevos: 3\nâœ“ Compatibilidad: 100% (Phaser 3.x)\nâœ“ Performance impact: MÃ­nimo (<1ms por frame)\n```\n\n---\n\n## ğŸš€ Roadmap de Extensiones\n\n### Fase 2: Multi-personaje\n```javascript\nif (characterIndex === 0) {\n    // LÃ³gica actual\n} else if (characterIndex === 1) {\n    // Agregar lÃ³gica similar para Personaje 2\n} else if (characterIndex === 2) {\n    // Agregar lÃ³gica para Personaje 3\n}\n```\n\n### Fase 3: Efectos de PartÃ­culas\n```javascript\nif (isMovingDown && characterIndex === 0) {\n    this.particles.emitParticleAt(x, y);  // Efecto de aire\n}\n```\n\n### Fase 4: Sonidos\n```javascript\nif (isMovingUp && wasOnFloor) {\n    this.sound.play('jump_sound');\n}\n```\n\n---\n\n*Ãšltima revisiÃ³n: 7/2/2026 - v1.0 STABLE* âœ…\n"